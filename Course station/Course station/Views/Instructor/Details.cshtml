@model Course_station.Models.Instructor

@{
    ViewData["Title"] = "Instructor Profile";
}

<!-- Link to the new CSS file -->
<link rel="stylesheet" href="~/css/Iprofile.css" />

<h1 class="text-center text-secondary">Instructor Profile</h1>

<div class="profile-container card shadow-lg p-4 bg-light rounded">
    <div class="profile-header d-flex align-items-center">
        <div class="profile-image">
            <img src="~/images/@($"{Model.InstructorId}_profile.jpg")" alt="Profile Picture" class="img-thumbnail">
        </div>
        <div class="profile-info ml-4">
            <h2 class="text-dark font-weight-bold">@Model.InstructorName</h2>
            <h4 class="text-secondary">ID: @Model.InstructorId</h4>
            <p class="text-muted mb-0">Email: <a href="mailto:@Model.Email" class="text-decoration-none text-info">@Model.Email</a></p>
            <p class="text-muted mb-0">Latest Qualification: @Model.LatestQualification</p>
            <p class="text-muted mb-0">Expertise Area: @Model.ExpertiseArea</p>
        </div>
    </div>
</div>

<div class="upload-photo mt-4 d-flex justify-content-center">
    <form id="uploadPhotoForm" asp-action="UploadProfilePicture" asp-controller="Instructor" method="post" enctype="multipart/form-data">
        <input type="hidden" name="instructorId" value="@Model.InstructorId" />
        <div class="form-group text-center">
            <input type="file" id="profilePictureInput" name="profilePicture" class="form-control-file d-none" />
            <button type="button" class="btn btn-primary" onclick="document.getElementById('profilePictureInput').click();">Choose and Upload Photo</button>
        </div>
    </form>
</div>

<div class="profile-details mt-4">
    <h3 class="text-center text-secondary">Courses</h3>
    <ul class="list-group">
        @foreach (var course in Model.Courses)
        {
            <li class="list-group-item">
                <strong>@course.Title</strong> - @course.Description
            </li>
        }
    </ul>
</div>

<div class="profile-details mt-4">
    <h3 class="text-center text-secondary">Emotional Feedback Reviews</h3>
    <ul class="list-group">
        @foreach (var review in Model.EmotionalfeedbackReviews)
        {
            <li class="list-group-item">
                <strong>Feedback ID:</strong> @review.FeedbackId <br />
                <strong>Review:</strong> @review.Review
            </li>
        }
    </ul>
</div>

<div class="profile-details mt-4">
    <h3 class="text-center text-secondary">Path Reviews</h3>
    <ul class="list-group">
        @foreach (var review in Model.Pathreviews)
        {
            <li class="list-group-item">
                <strong>Path ID:</strong> @review.PathId <br />
                <strong>Feedback:</strong> @review.Feedback
            </li>
        }
    </ul>
</div>

<div class="actions mt-4 d-flex justify-content-center">
    <a href="/Instructor/Edit/@Model.InstructorId" class="btn btn-warning btn-lg mx-2 shadow">Edit</a>
    <form method="post" action="/Instructor/Delete/@Model.InstructorId" onsubmit="return confirm('Are you sure you want to delete this instructor?');">
        <button type="submit" class="btn btn-danger btn-lg mx-2 shadow">Delete</button>
    </form>
</div>

@section Scripts {
    <script>
        document.getElementById('profilePictureInput').addEventListener('change', function () {
            var form = document.getElementById('uploadPhotoForm');
            form.submit();
        });
    </script>
}
